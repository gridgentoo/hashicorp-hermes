<div
  class="relative"
  aria-owns="facet-dropdown-menu"
  aria-expanded={{@dropdownIsShown}}
  ...attributes
>
  <Hds::Button
    {{did-insert this.registerTrigger}}
    {{on "click" this.toggleDropdown}}
    {{on "keydown" this.onButtonKeydown}}
    data-test-facet-dropdown-trigger={{@label}}
    disabled={{@disabled}}
    @icon={{if this.dropdownIsShown "chevron-up" "chevron-down"}}
    @iconPosition="trailing"
    @color="secondary"
    @text={{@label}}
    aria-haspopup="listbox"
    aria-controls={{if
      @inputIsShown
      "facet-dropdown-popover"
      "facet-dropdown-menu"
    }}
  />
  {{#if this.dropdownIsShown}}
    <Header::FacetDropdownList
      {{dismissible dismiss=this.hideDropdown related=this.triggerElement}}
      @shownFacets={{this.shownFacets}}
      @label={{@label}}
      @inputIsShown={{this.inputIsShown}}
      @onInput={{perform this.onInput}}
      @resetMenuItemIndex={{this.resetMenuItemIndex}}
      @registerMenuItems={{this.registerMenuItems}}
      @registerScrollContainer={{this.registerScrollContainer}}
      @query={{this.query}}
      @focusedItemIndex={{this.focusedItemIndex}}
      @setFocusedItemIndex={{this.setFocusedItemIndex}}
      @listItemRole={{this.listItemRole}}
      @registerPopover={{this.registerPopover}}
      @popoverElement={{this.popoverElement}}
      @triggerElement={{this.triggerElement}}
      @hideDropdown={{this.hideDropdown}}
    />
  {{/if}}
</div>
